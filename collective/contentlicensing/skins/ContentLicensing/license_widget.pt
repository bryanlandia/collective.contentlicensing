<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="plone">
  <head><title></title></head>
  <body>

    <metal:view_macro define-macro="view">
        <div
            tal:define="view here/@@dc_metadata;
                        objstuff python:view.getLicenseAndHolderFromObject(here);
                        license_name python:objstuff[1] and objstuff[1][0] or ''"
            tal:content="license_name"/>
    </metal:view_macro>

    <metal:define define-macro="edit">
      <metal:use use-macro="field_macro | here/widgets/field/macros/edit">
        <metal:widget_body fill-slot="widget_body">


        <tal:radios
            tal:define="view here/@@dc_metadata;
                        vocab view/getLicenses;
                        objstuff python:view.getLicenseAndHolderFromObject(here);
                        objLicense python:objstuff[1];
                        objLicenseId python:objLicense[0];"
            tal:repeat="item vocab">

          <div tal:omit-tag=""
               tal:define="itemId python:item[0];
                           itemLabel python:item[0];">

            <input class="noborder"
                   type="radio"
                   tal:attributes="name string:${fieldName};
                                   id string:${fieldName}_${repeat/item/number};
                                   checked python:objLicenseId == itemId;
                                   value itemId;"
                   />

            <label tal:content="itemLabel"
                i18n:translate=""/>

            <tal:block tal:condition="python:'Site Default' == itemId"
                       tal:define="default_license python:view.getLicenseTitle(here)" >
              (<span tal:content="default_license" />)
            </tal:block>

            <tal:block tal:condition="python:'Creative Commons License' == itemId"
                       tal:define="jsd view/getJurisdictionCode;">

              <span class="link-external"
                    style="color: #436976;
                           text-decoration: underline;"
                    tal:attributes="onClick string:window.open('http://creativecommons.org/license/?partner=Plone&jurisdiction=${jsd}&exit_url=${here/portal_url}/insert_license?license_url=[license_url]%26license_name=[license_name]%26license_button=[license_button]%26license_radio_id=${fieldName}_${repeat/item/number}%26license_id=${itemId}', 
                                                               null, 
                                                               'height=525, width=750, scrollbars=yes, resizeable=yes');" i18n:domain="ContentLicensing" i18n:translate="">(Choose)</span>
              <div style="margin: 5px 0 0 25px;"
                   tal:define="cc_license python:view.getDefaultCCLicense(item);
                               license_cc_name python:cc_license[1];
                               license_cc_url python:cc_license[2];
                               license_cc_button python:cc_license[3];">
                <img id="license_button1" tal:attributes="src license_cc_button" />
                <a id="license_name1"
                   target="_blank"
                   href="http://creativecommons.org"
                   tal:content="license_cc_name"
                   tal:attributes="href license_cc_url">Attribution 2.0</a>
                <input type="hidden" id="license_cc_name" name="license_cc_name" value=""
                       tal:attributes="value license_cc_name" />
                <input type="hidden" id="license_cc_url" name="license_cc_url"
                       tal:attributes="value license_cc_url" />
                <input type="hidden" id="license_cc_button" name="license_cc_button" value=""
                       tal:attributes="value license_cc_button" />
              </div>

            </tal:block>



            <tal:block tal:condition="python:'Other' == itemId">
              <span class="link-external"
                    style="color: #436976;
                           text-decoration: underline;"
                    tal:attributes="onClick string:window.open('create_license?license_id=${itemId}&license_radio_id=${fieldName}_${repeat/item/number}', 
                                                               null, 
                                                               'height=350, width=400, scrollbars=yes, resizeable=yes');" i18n:domain="ContentLicensing" i18n:translate="">(Choose)</span>


              <div style="margin: 5px 0 0 25px;"
                   tal:define="other_name python:view.getDefaultOtherLicenseName();
                               other_url python:view.getDefaultOtherLicenseUrl();
                               license_other_button python:view.getDefaultOtherLicenseButton();">

                <img id="license_other_button1" tal:attributes="src license_other_button" />

                <a id="other_name1"
                   target="_blank"
                   href=""
                   tal:content="other_name"
                   tal:attributes="href other_url">License Title</a>

                <input type="hidden"
                       name="license_other_name"
                       id="license_other_name"
                       tal:attributes="value other_name|nothing"
                       />

                <input type="hidden"
                       name="license_other_url"
                       id="license_other_url"
                       tal:attributes="value other_url|nothing"
                       />
                <input type="hidden" id="license_other_button" name="license_other_button" value=""
                       tal:attributes="value license_other_button" />

              </div>

            </tal:block>

            <br />

          </div>

        </tal:radios>

        <tal:checkbox condition="python:here.isPrincipiaFolderish">
          <div id="fieldname-recurse-license">
            <input type="checkbox" id="recurse_folders" name="recurse_folders" />

            <label for="recurse_folders"
                   i18n:domain="ContentLicensing" 
                   i18n:translate="">Apply License To Contained Objects</label>

            <div class="formHelp" id="recurse_help"
                 i18n:domain="ContentLicensing"
                 i18n:translate="">
               Check here to apply this license to all contained objects.
            </div>
          </div>
        </tal:checkbox>
        
        </metal:widget_body>
      </metal:use>
    </metal:define>

    <div metal:define-macro="search">
    </div>

  </body>

</html>